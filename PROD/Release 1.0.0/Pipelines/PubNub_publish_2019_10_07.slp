{"class_fqid":"com-snaplogic-pipeline_9","snode_id":"5b759e2d4dd5a8001fb80287","instance_id":"e7350ddf-17df-4527-9324-4c4d160d7434","instance_version":2,"link_map":{"link119":{"src_view_id":"output0","dst_view_id":"input0","src_id":"6da9ee54-cc66-4d98-94c3-b0dcd452780a","dst_id":"3b830780-2130-4623-a9d2-ee06fba6752c","isGoto":false}},"link_serial":131,"property_map":{"info":{"notes":{"value":null},"author":{"value":"harrybobadilla@gamestop.com"},"purpose":{"value":null},"pipeline_doc_uri":{"value":null},"label":{"value":"PubNub_publish"}},"input":{"6da9ee54-cc66-4d98-94c3-b0dcd452780a_input0":{"label":{"value":"Extract Credentials - input0"},"view_type":{"value":"document"}}},"error":{"error_behavior":{"value":"none"}},"output":{"3b830780-2130-4623-a9d2-ee06fba6752c_output103":{"view_type":{"value":"document"},"label":{"value":"Pipeline Execute - output0"}}},"settings":{"imports":{"value":[]},"error_param_table":{"value":[]},"error_pipeline":{"expression":false,"value":null},"param_table":{"value":[{"capture":{"value":true},"description":{"value":null},"data_type":{"value":"string"},"required":{"value":false},"value":{"value":"BOPS_pubnub_pub_dev_001"},"key":{"value":"pubKeyName"}},{"capture":{"value":true},"description":{"value":null},"data_type":{"value":"string"},"required":{"value":false},"value":{"value":"BOPS_pubnub_sub_dev_001"},"key":{"value":"subKeyName"}},{"capture":{"value":true},"description":{"value":null},"data_type":{"value":"string"},"required":{"value":false},"value":{"value":"http://gamestop.com/oms/orders/createshipment/v1/us/"},"key":{"value":"channel"}},{"capture":{"value":false},"description":{"value":null},"data_type":{"value":"string"},"required":{"value":false},"value":{"value":null},"key":{"value":"authtoken"}},{"capture":{"value":true},"description":{"value":null},"data_type":{"value":"string"},"required":{"value":false},"value":{"value":"{\"language\":\"french\"}"},"key":{"value":"meta"}}]}}},"render_map":{"pan_x_num":0,"default_snaplex":"54079ef050a39d5ac2ac04f4","scale_ratio":1,"detail_map":{"3b830780-2130-4623-a9d2-ee06fba6752c":{"grid_x_int":4,"error":{},"grid_y_int":1,"rot_tail_int":0,"input":{},"output":{},"rot_int":0},"6da9ee54-cc66-4d98-94c3-b0dcd452780a":{"grid_x_int":3,"error":{},"grid_y_int":1,"rot_tail_int":0,"input":{},"output":{},"rot_int":0}},"pan_y_num":0},"snap_map":{"3b830780-2130-4623-a9d2-ee06fba6752c":{"class_fqid":"com-snaplogic-snaps-flow-pipeexec_1-snapsmrc480","class_id":"com-snaplogic-snaps-flow-pipeexec","class_version":1,"instance_fqid":"3b830780-2130-4623-a9d2-ee06fba6752c_1","instance_id":"3b830780-2130-4623-a9d2-ee06fba6752c","instance_version":1,"property_map":{"info":{"notes":{"value":null},"label":{"value":"Pipeline Execute"}},"view_serial":103,"input":{"input0":{"view_type":{"value":"document"},"label":{"value":"input0"}}},"settings":{"pipeline":{"expression":false,"value":"z_publish_toPubNub_PoC"},"reuse":{"value":false},"poolSize":{"expression":false,"value":10},"executable_during_suggest":{"value":true},"loopDocument":{"expression":true},"execLabel":{"expression":true,"value":null},"params":{"value":[{"paramValue":{"expression":true,"value":"$pubKeyValue"},"paramName":{"value":"pubKeyValue"}},{"paramValue":{"expression":true,"value":"$subKeyValue"},"paramName":{"value":"subKeyValue"}},{"paramValue":{"expression":true,"value":"_channel"},"paramName":{"value":"channel"}},{"paramValue":{"expression":true,"value":"_authtoken"},"paramName":{"value":"authtoken"}},{"paramValue":{"expression":true,"value":"$orginal"},"paramName":{"value":"MSGcontent"}},{"paramValue":{"expression":true,"value":"_meta"},"paramName":{"value":"meta"}}]},"snaplex":{"expression":false,"value":null},"execution_mode":{"value":"Validate & Execute"}},"error":{"error0":{"view_type":{"value":"document"},"label":{"value":"error0"}},"error_behavior":{"value":"fail"}},"output":{"output103":{"view_type":{"value":"document"},"label":{"value":"output0"}}}},"class_build_tag":"snapsmrc480"},"6da9ee54-cc66-4d98-94c3-b0dcd452780a":{"class_fqid":"com-snaplogic-snaps-script-script_2-snapsmrc480","class_id":"com-snaplogic-snaps-script-script","class_version":2,"instance_fqid":"6da9ee54-cc66-4d98-94c3-b0dcd452780a_1","instance_id":"6da9ee54-cc66-4d98-94c3-b0dcd452780a","instance_version":1,"property_map":{"info":{"notes":{"value":null},"label":{"value":"Extract Credentials"}},"view_serial":100,"input":{"input0":{"view_type":{"value":"document"},"label":{"value":"input0"}}},"settings":{"executable_during_suggest":{"value":true},"editable_content":{"value":"# Import the interface required by the Script snap.\nfrom com.snaplogic.scripting.language import ScriptHook\nimport java.util\nimport os\n\nclass TransformScript(ScriptHook):\n    def __init__(self, input, output, error, log):\n        self.input = input\n        self.output = output\n        self.error = error\n        self.log = log\n\n    # The \"execute()\" method is called once when the pipeline is started\n    # and allowed to process its inputs or just send data to its outputs.\n    def execute(self):\n        self.log.info(\"Executing Transform script\")\n        \n        \n        pubKeyValue = os.environ[$_pubKeyName]\n        subKeyValue = os.environ[$_subKeyName]\n                \n        while self.input.hasNext():\n            try:\n                # Read the next document, wrap it in a map and write out the wrapper\n                in_doc = self.input.next()\n                wrapper = java.util.HashMap()\n                wrapper['orginal'] = in_doc\n                \n                wrapper.put(\"pubKeyValue\", pubKeyValue)\n                wrapper.put(\"subKeyValue\", subKeyValue)\n                self.output.write(wrapper)\n                \n                \n                \n            except Exception as e:\n                errWrapper = {\n                    'errMsg' : str(e.args)\n                }\n                self.log.error(\"Error in python script\")\n                self.error.write(errWrapper)\n\n        self.log.info(\"Finished executing the Transform script\")\n\n# The Script Snap will look for a ScriptHook object in the \"hook\"\n# variable.  The snap will then call the hook's \"execute\" method.\nhook = TransformScript(input, output, error, log)"},"execution_mode":{"value":"Validate & Execute"},"language":{"value":"Python"},"script":{"expression":false,"value":null}},"error":{"error0":{"view_type":{"value":"document"},"label":{"value":"error0"}},"error_behavior":{"value":"fail"}},"output":{"output0":{"view_type":{"value":"document"},"label":{"value":"output0"}}}},"class_build_tag":"snapsmrc480"}},"path_id":"/GameStopPROD/IT OMS/BOPS","path_snode":"5b75856e4503bf0020a524b7","target_runtime":"standard","snap_history":{}}